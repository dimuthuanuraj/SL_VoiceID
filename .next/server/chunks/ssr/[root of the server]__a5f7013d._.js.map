{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/img/MLSP_lab_logo_optimized.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 240, height: 45, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAATUlEQVR42gFCAL3/AAAAAAAAAAAAAAIDAhQ9T3R2hT2LIR4FFQAAAAAAAAAAAAAAPhgAAEccAABHGgkYYT5CQ15VCQhKIQAATBwAADMV3lkHdmXW6mkAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 2 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8HAAA,CAAA,UAAG;IAAE,OAAO;IAAK,QAAQ;IAAI,aAAa;IAA8M,WAAW;IAAG,YAAY;AAAE","debugId":null}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/header.tsx"],"sourcesContent":["import Link from 'next/link';\nimport Image from 'next/image';\nimport { Button } from '@/components/ui/button';\nimport { UserCog, UserPlus } from 'lucide-react';\nimport MlslpLogo from '@/img/MLSP_lab_logo_optimized.png';\n\nexport function Header() {\n  return (\n    <header className=\"bg-card shadow-sm sticky top-0 z-50\">\n      <div className=\"container mx-auto px-4 py-3 flex justify-between items-center\">\n        <div className=\"flex items-center space-x-4\">\n          <Link href=\"/\" className=\"flex items-center space-x-3 text-2xl font-bold text-primary\">\n             <Image\n              src=\"https://www.jfn.ac.lk/wp-content/uploads/2025/10/uoj_logo.png\"\n              alt=\"University of Jaffna Logo\"\n              width={40} \n              height={40}\n              className=\"h-10 w-10\"\n              data-ai-hint=\"university crest\"\n            />\n            <Image\n              src={MlslpLogo}\n              alt=\"MLSP Lab Logo\"\n              width={120} \n              height={23} \n              data-ai-hint=\"lab emblem\"\n            />\n            <span>VoiceID Lanka</span>\n          </Link>\n        </div>\n        <nav className=\"space-x-2\">\n          <Button variant=\"outline\" asChild>\n            <Link href=\"/register\">\n              <UserPlus className=\"mr-2 h-5 w-5\" />\n              Register\n            </Link>\n          </Button>\n          <Button variant=\"outline\" asChild>\n            <Link href=\"/admin\">\n              <UserCog className=\"mr-2 h-5 w-5\" />\n              Admin Panel\n            </Link>\n          </Button>\n        </nav>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAAA;AACA;;;;;;;AAEO,SAAS;IACd,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACtB,8OAAC,6HAAA,CAAA,UAAK;gCACL,KAAI;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,WAAU;gCACV,gBAAa;;;;;;0CAEf,8OAAC,6HAAA,CAAA,UAAK;gCACJ,KAAK,0SAAA,CAAA,UAAS;gCACd,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,gBAAa;;;;;;0CAEf,8OAAC;0CAAK;;;;;;;;;;;;;;;;;8BAGV,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAU,OAAO;sCAC/B,cAAA,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;;kDACT,8OAAC,8MAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;sCAIzC,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAU,OAAO;sCAC/B,cAAA,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;;kDACT,8OAAC,4MAAA,CAAA,UAAO;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQlD","debugId":null}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/speaker-id-display.tsx"],"sourcesContent":["\n'use client';\n\nimport { useToast } from '@/hooks/use-toast';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Copy, UserSquare2 } from 'lucide-react';\n\ninterface SpeakerIdDisplayProps {\n  speakerId: string | undefined | null; \n  isLoading?: boolean; // Optional loading state, defaults to false\n}\n\nexport function SpeakerIdDisplay({ speakerId, isLoading = false }: SpeakerIdDisplayProps) {\n  const { toast } = useToast();\n\n  const handleCopyId = () => {\n    if (speakerId) {\n      navigator.clipboard.writeText(speakerId)\n        .then(() => {\n          toast({\n            title: \"Speaker ID Copied!\",\n            description: \"Your unique Speaker ID has been copied to the clipboard.\",\n          });\n        })\n        .catch(err => {\n          console.error(\"Failed to copy Speaker ID: \", err);\n          toast({\n            title: \"Copy Failed\",\n            description: \"Could not copy Speaker ID. Please try again.\",\n            variant: \"destructive\",\n          });\n        });\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-md shadow-lg bg-card\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center text-xl text-primary\">\n          <UserSquare2 className=\"mr-3 h-6 w-6\" />\n          Your Unique Speaker ID\n        </CardTitle>\n        <CardDescription>\n          This ID is unique to you and will be associated with your voice samples.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        {isLoading ? (\n          <Skeleton className=\"h-10 w-full rounded-md bg-muted\" />\n        ) : speakerId ? (\n          <div className=\"flex items-center justify-between space-x-3 p-3 bg-secondary rounded-md\">\n            <p className=\"text-lg font-mono text-foreground flex-grow break-all\">\n              {speakerId}\n            </p>\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleCopyId} aria-label=\"Copy Speaker ID\" className=\"text-accent hover:text-accent/90\">\n              <Copy className=\"h-5 w-5\" />\n            </Button>\n          </div>\n        ) : (\n          <p className=\"text-destructive font-medium p-3 bg-destructive/10 rounded-md\">Speaker ID not available.</p>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AAAA;AANA;;;;;;;AAaO,SAAS,iBAAiB,EAAE,SAAS,EAAE,YAAY,KAAK,EAAyB;IACtF,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IAEzB,MAAM,eAAe;QACnB,IAAI,WAAW;YACb,UAAU,SAAS,CAAC,SAAS,CAAC,WAC3B,IAAI,CAAC;gBACJ,MAAM;oBACJ,OAAO;oBACP,aAAa;gBACf;YACF,GACC,KAAK,CAAC,CAAA;gBACL,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,MAAM;oBACJ,OAAO;oBACP,aAAa;oBACb,SAAS;gBACX;YACF;QACJ;IACF;IAEA,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;;kCACT,8OAAC,gIAAA,CAAA,YAAS;wBAAC,WAAU;;0CACnB,8OAAC,4NAAA,CAAA,cAAW;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;kCAG1C,8OAAC,gIAAA,CAAA,kBAAe;kCAAC;;;;;;;;;;;;0BAInB,8OAAC,gIAAA,CAAA,cAAW;0BACT,0BACC,8OAAC,oIAAA,CAAA,WAAQ;oBAAC,WAAU;;;;;2BAClB,0BACF,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCACV;;;;;;sCAEH,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,MAAK;4BAAO,SAAS;4BAAc,cAAW;4BAAkB,WAAU;sCAChG,cAAA,8OAAC,kMAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;yCAIpB,8OAAC;oBAAE,WAAU;8BAAgE;;;;;;;;;;;;;;;;;AAKvF","debugId":null}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/generate-reading-phrase-flow.ts"],"sourcesContent":["'use server';\n/**\n * @fileOverview Generates random short sentences for audio recording.\n *\n * - generateReadingPhrase - A function that generates a phrase.\n * - GenerateReadingPhraseInput - The input type for the generateReadingPhrase function.\n * - GenerateReadingPhraseOutput - The return type for the generateReadingPhrase function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst GenerateReadingPhraseInputSchema = z.object({\n  language: z.enum(['Sinhala', 'Tamil', 'English']).describe('The language for the phrase (Sinhala, Tamil, or English).'),\n});\nexport type GenerateReadingPhraseInput = z.infer<typeof GenerateReadingPhraseInputSchema>;\n\nconst GenerateReadingPhraseOutputSchema = z.object({\n  phrase: z.string().describe('A short sentence in the specified language, designed to be read aloud in approximately 8-15 seconds.'),\n});\nexport type GenerateReadingPhraseOutput = z.infer<typeof GenerateReadingPhraseOutputSchema>;\n\nexport async function generateReadingPhrase(input: GenerateReadingPhraseInput): Promise<GenerateReadingPhraseOutput> {\n  return generateReadingPhraseFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'generateReadingPhrasePrompt',\n  input: {schema: GenerateReadingPhraseInputSchema},\n  output: {schema: GenerateReadingPhraseOutputSchema},\n  prompt: `You are a creative assistant tasked with generating short, natural-sounding sentences for a voice recording application.\nThe sentence should be in {{language}}.\nThe sentence must be suitable for a native or fluent speaker to read aloud in approximately 8 to 15 seconds.\nThe sentence should be grammatically correct, common, and easy to understand. Avoid complex jargon, proper nouns (unless very common like a country name), or overly specific topics.\nGenerate only one sentence.\n\nLanguage: {{language}}\nDesired reading time: 8-15 seconds.\n\nExample for Sinhala (if language is Sinhala): \"අහස නිල් පාටයි, සමහර වලාකුළු සුදු පාටයි, ඒ වගේම හිරු එළිය දීප්තිමත්ව බබලනවා.\"\nExample for Tamil (if language is Tamil): \"வானம் நீல நிறமாகவும், சில மேகங்கள் வெண்மையாகவும், சூரியன் பிரகாசமாகவும் பிரகாசிக்கிறது.\"\nExample for English (if language is English): \"The sky is blue, some clouds are white, and a smile can brighten anyone's day, can't it?\"\n\nReturn ONLY the generated sentence as the 'phrase' output.\n`,\n});\n\nconst generateReadingPhraseFlow = ai.defineFlow(\n  {\n    name: 'generateReadingPhraseFlow',\n    inputSchema: GenerateReadingPhraseInputSchema,\n    outputSchema: GenerateReadingPhraseOutputSchema,\n  },\n  async (input) => {\n    // For very short generations like this, a higher temperature can lead to more varied and natural sentences.\n    // However, for consistency in meeting the \"8-15 second\" read time, a moderate temperature is safer.\n    const {output} = await prompt(input, {config: {temperature: 0.6}});\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;IAsBsB","debugId":null}},
    {"offset": {"line": 555, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions/audioDriveActions.ts"],"sourcesContent":["\n'use server';\n\nimport {\n  uploadFileToDrive as serviceUploadFile,\n  listFilesFromDrive as serviceListFiles,\n  downloadFileFromDrive as serviceDownloadFile,\n  appendDataToGoogleSheet,\n} from '@/services/google-drive-service';\nimport type { SpeakerProfile } from '@/contexts/auth-context';\nimport type { FileMetadata as DriveFileMetadata } from '@/services/google-service';\n\n\nexport interface EnrichedDriveAudioFile extends DriveFileMetadata {\n    // Client-side specific fields\n    status?: 'pending' | 'verified' | 'rejected';\n}\n\n\nexport async function uploadAudioToDriveAction(\n  formData: FormData,\n  userProfile: SpeakerProfile,\n  sessionLanguage: string,\n  phraseIndex: number,\n  phraseText: string\n): Promise<{ success: boolean; fileId?: string; fileName?: string; error?: string }> {\n  try {\n    const file = formData.get('audioBlob') as File | null;\n    const speakerId = userProfile.speakerId;\n\n    if (!file) {\n      return { success: false, error: 'No audio file provided.' };\n    }\n    if (!speakerId) {\n      return { success: false, error: 'Speaker ID is missing.' };\n    }\n    if(!sessionLanguage || !phraseText) {\n        return { success: false, error: 'Session language or phrase text missing.' };\n    }\n\n\n    const arrayBuffer = await file.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n    \n    const timestamp = new Date();\n    const isoTimestamp = timestamp.toISOString();\n    const formattedTimestamp = timestamp.toLocaleString('en-US', { timeZone: 'Asia/Colombo' });\n\n    const fileName = `${speakerId}_${sessionLanguage.toLowerCase()}_phrase${phraseIndex + 1}_${isoTimestamp.replace(/[:.]/g, '-')}.${file.name.split('.').pop() || 'webm'}`;\n\n    // 1. Upload the file to Google Drive\n    const uploadResult = await serviceUploadFile(\n        fileName, \n        buffer, \n        file.type,\n    );\n\n    if (uploadResult.id) {\n      // 2. If upload is successful, log the metadata to Google Sheets\n      const fileLink = `https://drive.google.com/file/d/${uploadResult.id}/view`;\n      \n      const sheetRow = [\n        speakerId,\n        userProfile.fullName,\n        userProfile.language, // Native Language\n        sessionLanguage, // Recorded Language\n        phraseIndex + 1,\n        phraseText,\n        fileName,\n        fileLink,\n        formattedTimestamp, // Timestamp\n        '', // Placeholder for Duration\n        'pending' // Default Status\n      ];\n\n      await appendDataToGoogleSheet(sheetRow);\n      \n      return { success: true, fileId: uploadResult.id, fileName: uploadResult.name };\n    } else {\n      return { success: false, error: 'Failed to upload file to Drive.' };\n    }\n  } catch (error) {\n    console.error('Error in uploadAudioToDriveAction:', error);\n    const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred during upload.';\n    return { success: false, error: `Upload Action Failed: ${errorMessage}` };\n  }\n}\n\nexport async function listAudioFilesFromDriveAction(): Promise<EnrichedDriveAudioFile[]> {\n  try {\n    const files = await serviceListFiles();\n    // The service now returns enriched metadata directly from the file names.\n    // Let's sort them by creation time descending.\n    return files\n        .sort((a, b) => new Date(b.createdTime || 0).getTime() - new Date(a.createdTime || 0).getTime())\n        .map(file => ({\n            ...file,\n            status: 'pending' // Default status, would be managed elsewhere (e.g. in the sheet or a DB)\n        }));\n\n  } catch (error) {\n    console.error('Error in listAudioFilesFromDriveAction:', error);\n    return [];\n  }\n}\n\nexport async function getAudioFileFromDriveAction(fileId: string): Promise<{ success: boolean; data?: string; mimeType?: string; error?: string, fileName?: string }> {\n  try {\n    const fileContent = await serviceDownloadFile(fileId);\n    \n    if (fileContent) {\n        // We need metadata to get the name and mimeType. For now, let's list and find.\n        // This is inefficient but works for the current structure.\n        const filesMeta = await serviceListFiles();\n        const fileMeta = filesMeta.find(f => f.id === fileId);\n        \n        if (!fileMeta || !fileMeta.name || !fileMeta.mimeType) {\n            // Fallback if metadata isn't found (should be rare)\n            console.warn(`Could not find metadata for fileId ${fileId} during download.`);\n            return { success: false, error: 'File content found, but metadata is missing.' };\n        }\n\n        const base64Data = fileContent.toString('base64');\n        return { \n            success: true, \n            data: `data:${fileMeta.mimeType};base64,${base64Data}`, \n            mimeType: fileMeta.mimeType, \n            fileName: fileMeta.name \n        };\n    } else {\n      return { success: false, error: 'File not found in Google Drive.' };\n    }\n  } catch (error) {\n    console.error('Error in getAudioFileFromDriveAction:', error);\n    return { success: false, error: error instanceof Error ? error.message : 'An unknown error occurred while fetching file.' };\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAmBsB;IAqEA;IAkBA","debugId":null}},
    {"offset": {"line": 571, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/audio-recorder.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useRef, useEffect, type RefObject } from 'react';\nimport { useToast } from '@/hooks/use-toast';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Mic, StopCircle, Send, Play, Download, AlertTriangle, Trash2, Loader2, ChevronRight, RefreshCcw, BrainCircuit, CheckCircle } from 'lucide-react';\nimport { Progress } from '@/components/ui/progress';\nimport { generateReadingPhrase } from '@/ai/flows/generate-reading-phrase-flow';\nimport type { SpeakerProfile } from '@/contexts/auth-context'; \nimport { uploadAudioToDriveAction } from '@/app/actions/audioDriveActions';\n\ntype RecordingStatus = 'idle' | 'recording' | 'stopped' | 'submitting' | 'error' | 'generating_phrase' | 'all_recorded';\ntype RecordingLanguage = 'Sinhala' | 'Tamil' | 'English';\n\nconst MAX_RECORDING_TIME_MS = 20000; \nconst NUMBER_OF_PHRASES_TO_RECORD = 5;\n\ninterface AudioRecorderProps {\n  userProfile: SpeakerProfile | null; \n  sessionLanguage: RecordingLanguage; \n}\n\n// Store local preview URLs with Drive file IDs\ninterface RecordedSampleInfo {\n  localAudioUrl: string; // Blob URL for local preview\n  driveFileId?: string;   // ID from Drive after successful upload\n  driveFileName?: string; // Filename in Drive\n  phraseIndex: number;\n  speakerId: string;\n  phraseText: string;\n  language: RecordingLanguage;\n}\n\n\nexport function AudioRecorder({ userProfile, sessionLanguage }: AudioRecorderProps) {\n  const { toast } = useToast();\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n  const [recordingStatus, setRecordingStatus] = useState<RecordingStatus>('idle');\n  const [currentPreviewAudioUrl, setCurrentPreviewAudioUrl] = useState<string | null>(null); // For the immediate recording\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const recordingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  \n  const [currentPhrase, setCurrentPhrase] = useState<string | null>(null);\n  const [currentPhraseIndex, setCurrentPhraseIndex] = useState(0);\n\n  const [recordedSamplesInfo, setRecordedSamplesInfo] = useState<RecordedSampleInfo[]>([]);\n\n  const speakerId = userProfile?.speakerId;\n\n\n  const fetchNewPhrase = async () => {\n    if (!sessionLanguage) {\n      setErrorMessage(\"Session language not set. Cannot fetch phrase.\");\n      setRecordingStatus('error');\n      return;\n    }\n    setRecordingStatus('generating_phrase');\n    setCurrentPhrase(null);\n    setErrorMessage(null);\n    try {\n      const generatedPhrase = await generateReadingPhrase({ language: sessionLanguage });\n      setCurrentPhrase(generatedPhrase.phrase);\n      setRecordingStatus('idle');\n    } catch (error) {\n      console.error(\"Error generating phrase:\", error);\n      setErrorMessage(\"Could not generate a new phrase. Please try again.\");\n      setRecordingStatus('error');\n      toast({\n        title: \"Phrase Generation Failed\",\n        description: \"Could not fetch a new reading phrase.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  useEffect(() => {\n    setRecordedSamplesInfo([]); \n    setCurrentPhraseIndex(0);\n    if (currentPreviewAudioUrl) URL.revokeObjectURL(currentPreviewAudioUrl);\n    setCurrentPreviewAudioUrl(null); \n    setRecordingStatus('idle'); \n    if (userProfile && sessionLanguage) {\n      fetchNewPhrase();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sessionLanguage, userProfile]); \n\n\n  useEffect(() => {\n    if (userProfile && sessionLanguage && currentPhraseIndex < NUMBER_OF_PHRASES_TO_RECORD && !currentPhrase && recordingStatus === 'idle') {\n      fetchNewPhrase();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userProfile, sessionLanguage, currentPhraseIndex, currentPhrase, recordingStatus]);\n\n\n  useEffect(() => {\n    return () => {\n      if (recordingIntervalRef.current) {\n        clearInterval(recordingIntervalRef.current);\n      }\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n        mediaRecorderRef.current.stop();\n      }\n      if(currentPreviewAudioUrl) {\n        URL.revokeObjectURL(currentPreviewAudioUrl);\n      }\n      recordedSamplesInfo.forEach(sample => {\n        if(sample.localAudioUrl.startsWith('blob:')){\n            URL.revokeObjectURL(sample.localAudioUrl)\n        }\n      });\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPreviewAudioUrl]); \n\n\n  const startRecording = async () => {\n    setErrorMessage(null);\n    if (currentPreviewAudioUrl) {\n      URL.revokeObjectURL(currentPreviewAudioUrl);\n      setCurrentPreviewAudioUrl(null);\n    }\n    audioChunksRef.current = [];\n    setRecordingTime(0);\n\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      setErrorMessage(\"Audio recording is not supported by your browser. Please use a modern browser like Chrome or Firefox.\");\n      setRecordingStatus('error');\n      return;\n    }\n\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      mediaRecorderRef.current = new MediaRecorder(stream, { mimeType: 'audio/webm' }); \n      mediaRecorderRef.current.ondataavailable = (event) => {\n        audioChunksRef.current.push(event.data);\n      };\n      mediaRecorderRef.current.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n        const url = URL.createObjectURL(audioBlob);\n        setCurrentPreviewAudioUrl(url);\n        setRecordingStatus('stopped');\n        stream.getTracks().forEach(track => track.stop());\n        if (recordingIntervalRef.current) clearInterval(recordingIntervalRef.current);\n      };\n      mediaRecorderRef.current.onerror = (event) => {\n        console.error(\"MediaRecorder error:\", event);\n        setErrorMessage(\"An error occurred during recording. Please try again.\");\n        setRecordingStatus('error');\n        if (recordingIntervalRef.current) clearInterval(recordingIntervalRef.current);\n         stream.getTracks().forEach(track => track.stop());\n      };\n      \n      mediaRecorderRef.current.start();\n      setRecordingStatus('recording');\n\n      recordingIntervalRef.current = setInterval(() => {\n        setRecordingTime(prevTime => {\n          const newTime = prevTime + 100;\n          if (newTime >= MAX_RECORDING_TIME_MS) {\n            stopRecording();\n          }\n          return newTime;\n        });\n      }, 100);\n\n    } catch (err) {\n      console.error(\"Error accessing microphone:\", err);\n      if (err instanceof DOMException && (err.name === \"NotFoundError\" || err.name === \"DevicesNotFoundError\")) {\n        setErrorMessage(\"No microphone found. Please connect a microphone and grant permission.\");\n      } else if (err instanceof DOMException && (err.name === \"NotAllowedError\" || err.name === \"PermissionDeniedError\")) {\n        setErrorMessage(\"Microphone access denied. Please grant permission in your browser settings.\");\n      } else {\n        setErrorMessage(\"Could not access microphone. Please ensure it's connected and permissions are granted.\");\n      }\n      setRecordingStatus('error');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n      mediaRecorderRef.current.stop();\n    }\n    if (recordingIntervalRef.current) {\n      clearInterval(recordingIntervalRef.current);\n    }\n  };\n\n  const saveAndNextPhrase = async () => {\n    if (!currentPreviewAudioUrl || !speakerId || !currentPhrase || !sessionLanguage || !userProfile) {\n        toast({ title: \"Error\", description: \"Missing required information to save.\", variant: \"destructive\"});\n        return;\n    }\n    setRecordingStatus('submitting'); // Indicate \"saving to drive\"\n    \n    const audioBlob = await fetch(currentPreviewAudioUrl).then(r => r.blob());\n    const formData = new FormData();\n    formData.append('audioBlob', audioBlob, `phrase_${currentPhraseIndex + 1}.webm`);\n\n    try {\n        const result = await uploadAudioToDriveAction(formData, userProfile, sessionLanguage, currentPhraseIndex, currentPhrase);\n\n        if (result.success && result.fileId && result.fileName) {\n            const newSampleInfo: RecordedSampleInfo = {\n                localAudioUrl: currentPreviewAudioUrl, // Keep local URL for now, might be revoked later\n                driveFileId: result.fileId,\n                driveFileName: result.fileName,\n                phraseIndex: currentPhraseIndex,\n                speakerId,\n                phraseText: currentPhrase,\n                language: sessionLanguage,\n            };\n            setRecordedSamplesInfo(prev => [...prev, newSampleInfo]);\n            setCurrentPreviewAudioUrl(null); // Clear current preview as it's \"saved\"\n            setCurrentPhrase(null);\n\n            toast({ title: `Phrase ${currentPhraseIndex + 1} Saved`, description: `\"${result.fileName}\" uploaded to Drive.`, variant: \"default\" });\n\n            if (currentPhraseIndex < NUMBER_OF_PHRASES_TO_RECORD - 1) {\n                setCurrentPhraseIndex(prev => prev + 1);\n                setRecordingStatus('idle'); // Fetch next phrase\n            } else {\n                toast({ title: \"All Phrases Recorded!\", description: `You have recorded all ${NUMBER_OF_PHRASES_TO_RECORD} phrases in ${sessionLanguage}.`, variant: \"default\" });\n                setRecordingStatus('all_recorded');\n                setCurrentPhraseIndex(prev => prev + 1);\n            }\n        } else {\n            toast({ title: \"Upload Failed\", description: result.error || \"Could not save to Drive.\", variant: \"destructive\"});\n            setRecordingStatus('stopped'); // Revert to stopped so user can try saving again\n        }\n    } catch (error) {\n        console.error(\"Error saving to Drive:\", error);\n        toast({ title: \"Upload Exception\", description: \"An error occurred while saving.\", variant: \"destructive\"});\n        setRecordingStatus('stopped');\n    }\n  };\n\n  const resetCurrentRecording = () => {\n    if (currentPreviewAudioUrl) {\n        URL.revokeObjectURL(currentPreviewAudioUrl);\n    }\n    setCurrentPreviewAudioUrl(null);\n    setRecordingStatus('idle');\n    setErrorMessage(null);\n    audioChunksRef.current = [];\n    setRecordingTime(0);\n    if (recordingIntervalRef.current) clearInterval(recordingIntervalRef.current);\n  };\n\n  const discardAllSamplesAndRestartSession = () => {\n    recordedSamplesInfo.forEach(sample => {\n        if(sample.localAudioUrl.startsWith('blob:')){\n             URL.revokeObjectURL(sample.localAudioUrl);\n        }\n        // Note: We are not deleting from Drive here, only local session state.\n        // A real \"discard\" might involve deleting from Drive as well.\n    });\n    setRecordedSamplesInfo([]);\n    setCurrentPhraseIndex(0);\n    setCurrentPhrase(null); \n    resetCurrentRecording(); \n    toast({ title: `All local progress for ${sessionLanguage} discarded.`, description: \"Starting phrase collection again.\", variant: \"default\" });\n    fetchNewPhrase(); \n  }\n\n  // This function is now more of a conceptual \"session complete\" since individual uploads happen\n  const handleSubmitAll = async () => {\n    if (recordedSamplesInfo.length < NUMBER_OF_PHRASES_TO_RECORD) {\n      toast({\n        title: 'Session Not Complete',\n        description: `Please record and save all ${NUMBER_OF_PHRASES_TO_RECORD} phrases in ${sessionLanguage}.`,\n        variant: 'destructive',\n      });\n      return;\n    }\n    if (!speakerId) {\n        toast({ title: 'Submission Error', description: 'Speaker ID is missing.', variant: 'destructive' });\n        return;\n    }\n\n    // All files are already \"submitted\" to Drive one by one.\n    // This function can now just confirm completion and reset.\n    setRecordingStatus('submitting'); // Show a final \"submitting\" state for UX\n    \n    toast({\n      title: `Session for ${sessionLanguage} Complete!`,\n      description: `All ${recordedSamplesInfo.length} audio samples in ${sessionLanguage} have been uploaded to Google Drive.`,\n      variant: 'default',\n    });\n    \n    // Clean up local blob URLs (as they are now on Drive)\n    recordedSamplesInfo.forEach(sample => {\n        if (sample.localAudioUrl.startsWith('blob:')) {\n            URL.revokeObjectURL(sample.localAudioUrl);\n        }\n    });\n\n    setRecordedSamplesInfo([]); // Clear the local list of recorded samples\n    setCurrentPhraseIndex(0);\n    setCurrentPhrase(null); \n    resetCurrentRecording(); \n    setRecordingStatus('idle'); \n    // Optionally fetch a new phrase if user stays on page, or let them navigate\n    // fetchNewPhrase(); \n  };\n\n  const recordingProgress = (recordingTime / MAX_RECORDING_TIME_MS) * 100;\n  const isActionDisabled = !userProfile || recordingStatus === 'recording' || recordingStatus === 'submitting' || recordingStatus === 'generating_phrase' || !sessionLanguage;\n  const allPhrasesRecordedForSession = currentPhraseIndex >= NUMBER_OF_PHRASES_TO_RECORD && recordedSamplesInfo.length === NUMBER_OF_PHRASES_TO_RECORD;\n\n\n  if (!userProfile) {\n    return (\n        <Card className=\"w-full max-w-lg shadow-lg bg-card\">\n            <CardHeader>\n                <CardTitle className=\"text-primary\">Please Log In</CardTitle>\n            </CardHeader>\n            <CardContent>\n                <p className=\"text-muted-foreground\">You need to be logged in to record audio samples.</p>\n            </CardContent>\n        </Card>\n    );\n  }\n  \n  if (!sessionLanguage) {\n     return (\n        <Card className=\"w-full max-w-lg shadow-lg bg-card\">\n            <CardHeader>\n                <CardTitle className=\"text-primary\">Language Not Selected</CardTitle>\n            </CardHeader>\n            <CardContent>\n                <p className=\"text-muted-foreground\">Please select a language on the previous page to start recording.</p>\n            </CardContent>\n        </Card>\n    );\n  }\n\n\n  return (\n    <Card className=\"w-full max-w-lg shadow-xl bg-card\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center text-xl text-primary\">\n          <Mic className=\"mr-3 h-6 w-6\" />\n          Record in {sessionLanguage} (Phrase {Math.min(currentPhraseIndex + 1, NUMBER_OF_PHRASES_TO_RECORD)} of {NUMBER_OF_PHRASES_TO_RECORD})\n        </CardTitle>\n        <CardDescription>\n          Read the following phrase clearly. Max {MAX_RECORDING_TIME_MS / 1000}s per phrase. Your native language: {userProfile.language}.\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        <div className=\"p-4 border rounded-md bg-muted min-h-[100px] flex items-center justify-center text-center\">\n            {recordingStatus === 'generating_phrase' && (\n                <div className=\"text-muted-foreground\">\n                    <Loader2 className=\"h-8 w-8 mx-auto animate-spin mb-2 text-primary\" />\n                    <p>Generating new {sessionLanguage} phrase...</p>\n                </div>\n            )}\n            {currentPhrase && recordingStatus !== 'generating_phrase' && recordingStatus !== 'all_recorded' && (\n                <p className=\"text-xl font-semibold text-foreground leading-relaxed\">\n                    \"{currentPhrase}\"\n                </p>\n            )}\n            {!currentPhrase && recordingStatus === 'idle' && currentPhraseIndex < NUMBER_OF_PHRASES_TO_RECORD && (\n                 <p className=\"text-muted-foreground\">Waiting for {sessionLanguage} phrase...</p>\n            )}\n            {recordingStatus === 'all_recorded' && (\n                <div className=\"text-center text-primary space-y-2\">\n                    <CheckCircle className=\"h-10 w-10 mx-auto text-accent\" />\n                    <p className=\"text-lg font-semibold\">All {sessionLanguage} phrases recorded and saved!</p>\n                    <p className=\"text-sm text-muted-foreground\">You can now finalize the session.</p>\n                </div>\n            )}\n        </div>\n\n        {errorMessage && (\n          <div className=\"p-3 rounded-md bg-destructive/15 text-destructive-foreground flex items-center border border-destructive shadow-sm\">\n            <AlertTriangle className=\"h-5 w-5 mr-3 flex-shrink-0\" />\n            <p className=\"text-sm\">{errorMessage}</p>\n          </div>\n        )}\n\n        {recordingStatus === 'recording' && (\n          <div className=\"space-y-2\">\n            <p className=\"text-center text-destructive font-medium animate-pulse\">Recording... Speak clearly into the microphone.</p>\n            <Progress value={recordingProgress} className=\"w-full [&>div]:bg-primary\" />\n            <p className=\"text-xs text-muted-foreground text-center\">\n              {Math.floor(recordingTime / 1000)}s / {MAX_RECORDING_TIME_MS / 1000}s\n            </p>\n          </div>\n        )}\n\n        {currentPreviewAudioUrl && (recordingStatus === 'stopped' || recordingStatus === 'submitting') && currentPhrase && (\n          <div className=\"space-y-3 p-3 bg-secondary/50 rounded-md border\">\n            <p className=\"font-medium text-center text-primary\">Preview for {sessionLanguage} phrase {currentPhraseIndex + 1}:</p>\n            <audio controls src={currentPreviewAudioUrl} className=\"w-full rounded-md shadow-sm\" aria-label={`Audio preview for phrase ${currentPhraseIndex + 1}`} />\n            <div className=\"flex justify-center space-x-2 pt-2\">\n              <Button variant=\"outline\" size=\"sm\" onClick={() => {\n                if (!currentPreviewAudioUrl) return;\n                const a = document.createElement('a');\n                a.href = currentPreviewAudioUrl;\n                a.download = `${speakerId || 'unknown-speaker'}_${sessionLanguage.toLowerCase()}_phrase${currentPhraseIndex + 1}_preview.webm`;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n                 toast({ title: \"Audio Downloaded\", description: \"The preview audio has been downloaded.\"});\n              }} disabled={recordingStatus === 'submitting'}>\n                <Download className=\"mr-2 h-4 w-4\" /> Download Preview\n              </Button>\n               <Button variant=\"destructive\" size=\"sm\" onClick={resetCurrentRecording} disabled={recordingStatus === 'submitting'}>\n                <Trash2 className=\"mr-2 h-4 w-4\" /> Re-record This Phrase\n              </Button>\n            </div>\n          </div>\n        )}\n        \n        {recordingStatus === 'error' && (!currentPhrase || currentPhraseIndex < NUMBER_OF_PHRASES_TO_RECORD) && (\n          <Button onClick={fetchNewPhrase} variant=\"outline\" className=\"w-full sm:w-auto\" disabled={isActionDisabled || !sessionLanguage}>\n            <BrainCircuit className=\"mr-2 h-5 w-5\" />\n            Try Generating Phrase Again\n          </Button>\n        )}\n\n        <div className=\"flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-3 pt-2\">\n          {(recordingStatus === 'idle' || recordingStatus === 'error') && !allPhrasesRecordedForSession && currentPhrase && (\n            <Button \n              onClick={startRecording} \n              disabled={!speakerId || isActionDisabled || !!currentPreviewAudioUrl || !sessionLanguage || !currentPhrase} \n              className=\"w-full sm:w-auto bg-primary hover:bg-primary/90 text-primary-foreground text-base py-3 px-6\"\n              size=\"lg\"\n            >\n              <Mic className=\"mr-2 h-5 w-5\" />\n              {`Record Phrase ${currentPhraseIndex + 1}`}\n            </Button>\n          )}\n\n          {recordingStatus === 'recording' && (\n            <Button \n              onClick={stopRecording} \n              variant=\"destructive\" \n              className=\"w-full sm:w-auto text-base py-3 px-6\"\n              size=\"lg\"\n            >\n              <StopCircle className=\"mr-2 h-5 w-5\" /> Stop Recording\n            </Button>\n          )}\n\n          {(recordingStatus === 'stopped' || recordingStatus === 'submitting') && currentPreviewAudioUrl && !allPhrasesRecordedForSession && (\n             <Button \n              onClick={saveAndNextPhrase} \n              disabled={!speakerId || isActionDisabled || !currentPreviewAudioUrl} \n              className=\"w-full sm:w-auto bg-accent hover:bg-accent/90 text-accent-foreground text-base py-3 px-6\"\n              size=\"lg\"\n            >\n              {recordingStatus === 'submitting' ? <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" /> : <Send className=\"mr-2 h-5 w-5\" />}\n              {recordingStatus === 'submitting' ? `Saving Phrase ${currentPhraseIndex + 1}...` : `Save Phrase ${currentPhraseIndex + 1} & Next`} \n              {recordingStatus !== 'submitting' && <ChevronRight className=\"ml-2 h-5 w-5\" /> }\n            </Button>\n          )}\n        </div>\n        {!speakerId && recordingStatus === 'idle' && (\n            <p className=\"text-xs text-destructive text-center mt-2\">Cannot record without a Speaker ID. Please log in.</p>\n        )}\n        \n        {(recordedSamplesInfo.length > 0 || recordingStatus === 'all_recorded') && (\n            <div className=\"mt-6 space-y-2\">\n                <h4 className=\"text-md font-medium text-muted-foreground text-center\">\n                  {sessionLanguage} Recording Progress: {recordedSamplesInfo.length} / {NUMBER_OF_PHRASES_TO_RECORD} Saved\n                </h4>\n                 <Progress value={(recordedSamplesInfo.length / NUMBER_OF_PHRASES_TO_RECORD) * 100} className=\"w-full h-3 [&>div]:bg-accent shadow-sm\" />\n            </div>\n        )}\n\n      </CardContent>\n      <CardFooter className=\"flex flex-col items-stretch space-y-3 pt-6 border-t\">\n        <Button \n          onClick={handleSubmitAll} \n          disabled={recordingStatus === 'submitting' || !allPhrasesRecordedForSession || !speakerId} \n          className=\"w-full bg-green-600 hover:bg-green-700 text-white text-base py-3 px-6\"\n          size=\"lg\"\n        >\n          {recordingStatus === 'submitting' && !allPhrasesRecordedForSession ? <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" /> : <CheckCircle className=\"mr-2 h-5 w-5\" />}\n          {recordingStatus === 'submitting' && !allPhrasesRecordedForSession ? `Finalizing ${sessionLanguage} Session...` : `Finalize ${sessionLanguage} Session (${recordedSamplesInfo.length})`}\n        </Button>\n        \n        {(recordedSamplesInfo.length > 0 || currentPhraseIndex > 0) && recordingStatus !== 'submitting' && (\n             <Button variant=\"outline\" onClick={discardAllSamplesAndRestartSession} className=\"w-full text-base py-3 px-6 border-destructive text-destructive hover:bg-destructive/10 hover:text-destructive\" size=\"lg\">\n                <RefreshCcw className=\"mr-2 h-4 w-4\" /> Discard All & Restart {sessionLanguage} Session\n            </Button>\n        )}\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1499, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1528, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1560, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/login-form.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useContext } from 'react';\nimport { useForm, type SubmitHandler } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from '@/components/ui/card';\nimport { useToast } from '@/hooks/use-toast';\nimport { Loader2, LogIn } from 'lucide-react';\nimport type { SpeakerProfile } from '@/contexts/auth-context';\nimport { AuthContext } from '@/contexts/auth-context';\nimport { auth } from '@/services/firebase';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\nimport { getUserBySpeakerId } from '@/services/user-service';\n\nconst loginSchema = z.object({\n  speakerId: z.string().min(1, { message: 'Speaker ID is required.' }),\n  password: z.string().min(6, { message: 'Password must be at least 6 characters.' }),\n});\n\ntype LoginFormValues = z.infer<typeof loginSchema>;\n\ninterface LoginFormProps {\n  onLoginSuccess: (user: SpeakerProfile) => void;\n}\n\nexport function LoginForm({ onLoginSuccess }: LoginFormProps) {\n  const { toast } = useToast();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const authContext = useContext(AuthContext);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginFormValues>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      speakerId: '',\n      password: '',\n    }\n  });\n\n  const onSubmit: SubmitHandler<LoginFormValues> = async (data) => {\n    setIsSubmitting(true);\n    \n    try {\n      // Step 1: Find user profile by Speaker ID to get their email\n      const userProfile = await getUserBySpeakerId(data.speakerId);\n\n      if (userProfile) {\n        // Step 2: Attempt to sign in with Firebase Auth using the fetched email and provided password\n        await signInWithEmailAndPassword(auth, userProfile.email, data.password);\n        \n        // Step 3: If Firebase auth is successful, call the main onLoginSuccess handler\n        // with the complete user profile.\n        toast({\n          title: 'Login Successful!',\n          description: `Welcome back, ${userProfile.fullName}!`,\n        });\n        \n        onLoginSuccess(userProfile);\n\n      } else {\n        // This error is for when the Speaker ID itself is not found in the database\n        throw new Error(\"Invalid Speaker ID.\");\n      }\n    } catch (error) {\n      console.error(\"Login failed:\", error);\n      let message = 'Invalid Speaker ID or password. Please check your credentials or register.';\n      if (error instanceof Error && (error.message.includes('auth/wrong-password') || error.message.includes('auth/invalid-credential'))) {\n          message = 'Incorrect password. Please try again.';\n      } else if (error instanceof Error && error.message.includes('Invalid Speaker ID')) {\n          message = 'No user found with that Speaker ID.';\n      } else if (error instanceof Error && error.message.includes('auth/invalid-api-key')) {\n          message = 'The Firebase API key is not valid. Please check your configuration.';\n      }\n\n\n      toast({\n        title: 'Login Failed',\n        description: message,\n        variant: 'destructive',\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  return (\n    <Card className=\"w-full max-w-md shadow-xl bg-card\">\n      <CardHeader>\n        <CardTitle className=\"text-2xl text-primary\">Login to Your Account</CardTitle>\n        <CardDescription>Enter your Speaker ID and Password to continue.</CardDescription>\n      </CardHeader>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <CardContent className=\"space-y-6\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"speakerId\" className=\"text-foreground\">Speaker ID</Label>\n            <Input\n              id=\"speakerId\"\n              type=\"text\"\n              placeholder=\"e.g., id90000\"\n              {...register('speakerId')}\n              className={errors.speakerId ? 'border-destructive' : ''}\n            />\n            {errors.speakerId && <p className=\"text-sm text-destructive\">{errors.speakerId.message}</p>}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\" className=\"text-foreground\">Password</Label>\n            <Input\n              id=\"password\"\n              type=\"password\"\n              placeholder=\"••••••••\"\n              {...register('password')}\n              className={errors.password ? 'border-destructive' : ''}\n            />\n            {errors.password && <p className=\"text-sm text-destructive\">{errors.password.message}</p>}\n          </div>\n        </CardContent>\n        <CardFooter className=\"flex-col items-stretch space-y-3\">\n          <Button type=\"submit\" className=\"w-full bg-accent hover:bg-accent/90 text-accent-foreground\" disabled={isSubmitting}>\n            {isSubmitting ? (\n              <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n            ) : (\n              <LogIn className=\"mr-2 h-5 w-5\" />\n            )}\n            {isSubmitting ? 'Logging In...' : 'Login'}\n          </Button>\n        </CardFooter>\n      </form>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1816, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useContext, useState, useEffect } from 'react';\nimport { Header } from '@/components/header';\nimport { SpeakerIdDisplay } from '@/components/speaker-id-display';\nimport { AudioRecorder } from '@/components/audio-recorder';\nimport { LoginForm } from '@/components/login-form';\nimport { AuthContext, type SpeakerProfile } from '@/contexts/auth-context'; \nimport { Button } from '@/components/ui/button';\nimport { LogOut, Languages, Check } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\n\ntype RecordingLanguage = 'Sinhala' | 'Tamil' | 'English';\n\nexport default function HomePage() {\n  const authContext = useContext(AuthContext);\n  const [selectedRecordingLanguage, setSelectedRecordingLanguage] = useState<RecordingLanguage | null>(null);\n  const [currentYear, setCurrentYear] = useState(new Date().getFullYear());\n\n  useEffect(() => {\n    // Reset selected language if user logs out\n    if (!authContext?.loggedInUser) {\n      setSelectedRecordingLanguage(null);\n    }\n    setCurrentYear(new Date().getFullYear());\n  }, [authContext?.loggedInUser]);\n\n  if (!authContext) {\n    return (\n      <div className=\"flex flex-col min-h-screen bg-secondary items-center justify-center\">\n        <Header />\n        <main className=\"flex-grow container mx-auto px-4 py-8 flex flex-col items-center justify-center\">\n         <Card className=\"w-full max-w-md shadow-xl\">\n            <CardHeader>\n              <CardTitle className=\"text-2xl text-destructive\">Error</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p>AuthContext not found. Please ensure AuthProvider wraps your application.</p>\n            </CardContent>\n          </Card>\n        </main>\n      </div>\n    );\n  }\n\n  const { loggedInUser, logoutUser, setLoggedInUser } = authContext;\n\n  const handleLoginSuccess = (user: SpeakerProfile) => {\n    setLoggedInUser(user);\n  };\n\n  const handleLanguageSelect = (language: RecordingLanguage) => {\n    setSelectedRecordingLanguage(language);\n  };\n\n  const handleChangeLanguage = () => {\n    setSelectedRecordingLanguage(null); // Go back to language selection\n  };\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-secondary\">\n      <Header />\n      <main className=\"flex-grow container mx-auto px-4 py-8 flex flex-col items-center justify-center space-y-8\">\n        {!loggedInUser ? (\n          <>\n            <div className=\"text-center\">\n              <h1 className=\"text-4xl font-bold tracking-tight text-primary sm:text-5xl\">\n                Welcome to VoiceID Lanka\n              </h1>\n              <p className=\"mt-4 text-lg text-muted-foreground\">\n                Please log in to record your voice samples.\n              </p>\n            </div>\n            <LoginForm onLoginSuccess={handleLoginSuccess} />\n          </>\n        ) : !selectedRecordingLanguage ? (\n          <Card className=\"w-full max-w-md shadow-xl\">\n            <CardHeader>\n              <CardTitle className=\"text-2xl text-primary\">Select Recording Language</CardTitle>\n              <CardDescription>Choose the language you want to record samples in for this session. Your native language is {loggedInUser.language}.</CardDescription>\n            </CardHeader>\n            <CardContent className=\"flex flex-col space-y-3\">\n              {(['Sinhala', 'Tamil', 'English'] as RecordingLanguage[]).map((lang) => (\n                <Button \n                  key={lang} \n                  onClick={() => handleLanguageSelect(lang)} \n                  variant={loggedInUser.language === lang ? \"default\" : \"outline\"}\n                  className=\"justify-start text-lg py-6 group\"\n                >\n                  <Languages className=\"mr-3 h-5 w-5 text-primary group-hover:text-primary-foreground\" /> {lang}\n                  {loggedInUser.language === lang && <span className=\"ml-auto text-xs text-primary-foreground/80\">(Native)</span>}\n                </Button>\n              ))}\n               <Button variant=\"ghost\" onClick={logoutUser} size=\"sm\" className=\"mt-4 self-start text-muted-foreground hover:text-destructive\">\n                  <LogOut className=\"mr-2 h-4 w-4\" /> Logout\n                </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          <>\n            <div className=\"text-center w-full max-w-lg\">\n              <div className=\"flex justify-between items-center mb-2\">\n                 <h1 className=\"text-4xl font-bold tracking-tight text-primary sm:text-5xl\">\n                    Voice Recording\n                 </h1>\n                <Button variant=\"outline\" onClick={logoutUser} size=\"sm\" className=\"hover:border-destructive hover:text-destructive\">\n                  <LogOut className=\"mr-2 h-4 w-4\" /> Logout\n                </Button>\n              </div>\n              <p className=\"mt-1 text-lg text-muted-foreground\">\n                Welcome back, {loggedInUser.fullName}! \n              </p>\n              <div className=\"mt-2 flex items-center justify-center space-x-2\">\n                 <p className=\"text-md text-muted-foreground\">\n                    Recording in: <span className=\"font-semibold text-accent\">{selectedRecordingLanguage}</span>\n                 </p>\n                 <Button variant=\"link\" onClick={handleChangeLanguage} size=\"sm\" className=\"text-accent p-0 h-auto hover:text-accent/80\">\n                    (Change Language)\n                  </Button>\n              </div>\n            </div>\n            <SpeakerIdDisplay speakerId={loggedInUser.speakerId} />\n            <AudioRecorder userProfile={loggedInUser} sessionLanguage={selectedRecordingLanguage} />\n          </>\n        )}\n      </main>\n      <footer className=\"py-6 text-center text-sm text-muted-foreground border-t bg-card\">\n        © {currentYear} LankaVoiceID University of Jaffna. All rights reserved.\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}